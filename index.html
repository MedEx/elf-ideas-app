<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elf Ideas AI | Creative Elf on the Shelf Ideas for Busy Parents</title>
    <meta name="description" content="AI-powered Elf on the Shelf idea generator. Get personalized, creative ideas based on your kids' ages and interests. Never run out of elf inspiration again.">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=DM+Sans:wght@400;500;600&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --forest: #1a3a2f;
            --forest-light: #2d5a47;
            --cranberry: #8b1538;
            --cranberry-light: #a91d45;
            --cream: #faf6f0;
            --cream-dark: #f0e8dc;
            --gold: #c9a227;
            --gold-light: #d4b440;
            --charcoal: #2a2a2a;
            --snow: #ffffff;
            
            --font-display: 'Playfair Display', Georgia, serif;
            --font-body: 'DM Sans', -apple-system, sans-serif;
            
            --shadow-soft: 0 4px 20px rgba(26, 58, 47, 0.1);
            --shadow-medium: 0 8px 30px rgba(26, 58, 47, 0.15);
            --shadow-strong: 0 12px 40px rgba(26, 58, 47, 0.2);
            
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 20px;
            --radius-xl: 32px;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: var(--font-body);
            background: var(--cream);
            color: var(--charcoal);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        /* Subtle background pattern */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(201, 162, 39, 0.03) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(139, 21, 56, 0.03) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }
        
        #root {
            position: relative;
            z-index: 1;
        }
        
        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes shimmer {
            0% { background-position: -200% center; }
            100% { background-position: 200% center; }
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        @keyframes sparkle {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        .fade-in {
            animation: fadeInUp 0.6s ease-out forwards;
        }
        
        .delay-1 { animation-delay: 0.1s; opacity: 0; }
        .delay-2 { animation-delay: 0.2s; opacity: 0; }
        .delay-3 { animation-delay: 0.3s; opacity: 0; }
        .delay-4 { animation-delay: 0.4s; opacity: 0; }
        .delay-5 { animation-delay: 0.5s; opacity: 0; }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <script type="text/babel">
        const { useState, useEffect, useCallback, useRef } = React;
        
        // ============ CONSTANTS ============
        const PRICING = {
            SINGLE: { price: 3.99, label: 'Single Use', ideas: 3 },
            SEASON: { price: 16.99, label: 'Season Pass', ideas: 'unlimited' }
        };
        
        const FREE_DAILY_LIMIT = 3;
        
        const STORAGE_KEYS = {
            PROFILES: 'elfideas_profiles',
            FAVORITES: 'elfideas_favorites',
            USAGE: 'elfideas_usage',
            PREMIUM: 'elfideas_premium'
        };
        
        // ============ UTILITIES ============
        const storage = {
            get: (key) => {
                try {
                    const item = localStorage.getItem(key);
                    return item ? JSON.parse(item) : null;
                } catch { return null; }
            },
            set: (key, value) => {
                try {
                    localStorage.setItem(key, JSON.stringify(value));
                } catch { console.warn('Storage unavailable'); }
            }
        };
        
        const getTodayKey = () => new Date().toISOString().split('T')[0];
        
        const getUsageToday = () => {
            const usage = storage.get(STORAGE_KEYS.USAGE) || {};
            return usage[getTodayKey()] || 0;
        };
        
        const incrementUsage = () => {
            const usage = storage.get(STORAGE_KEYS.USAGE) || {};
            const today = getTodayKey();
            usage[today] = (usage[today] || 0) + 1;
            storage.set(STORAGE_KEYS.USAGE, usage);
        };
        
        // ============ ICONS ============
        const Icons = {
            Sparkles: () => (
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                    <path d="M12 3l1.5 4.5L18 9l-4.5 1.5L12 15l-1.5-4.5L6 9l4.5-1.5L12 3z"/>
                    <path d="M5 19l1 3 1-3 3-1-3-1-1-3-1 3-3 1 3 1z"/>
                    <path d="M19 13l1 2 1-2 2-1-2-1-1-2-1 2-2 1 2 1z"/>
                </svg>
            ),
            User: () => (
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                    <circle cx="12" cy="8" r="4"/>
                    <path d="M4 20c0-4 4-6 8-6s8 2 8 6"/>
                </svg>
            ),
            Camera: () => (
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                    <path d="M23 19a2 2 0 01-2 2H3a2 2 0 01-2-2V8a2 2 0 012-2h4l2-3h6l2 3h4a2 2 0 012 2z"/>
                    <circle cx="12" cy="13" r="4"/>
                </svg>
            ),
            Heart: ({ filled }) => (
                <svg width="24" height="24" viewBox="0 0 24 24" fill={filled ? "currentColor" : "none"} stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                    <path d="M20.84 4.61a5.5 5.5 0 00-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 00-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 000-7.78z"/>
                </svg>
            ),
            Crown: () => (
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                    <path d="M2 17l3-11 5 4 2-6 2 6 5-4 3 11H2z"/>
                    <path d="M2 17h20v2a2 2 0 01-2 2H4a2 2 0 01-2-2v-2z"/>
                </svg>
            ),
            Plus: () => (
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                    <line x1="12" y1="5" x2="12" y2="19"/>
                    <line x1="5" y1="12" x2="19" y2="12"/>
                </svg>
            ),
            X: () => (
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                    <line x1="18" y1="6" x2="6" y2="18"/>
                    <line x1="6" y1="6" x2="18" y2="18"/>
                </svg>
            ),
            Refresh: () => (
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                    <polyline points="23 4 23 10 17 10"/>
                    <path d="M20.49 15a9 9 0 11-2.12-9.36L23 10"/>
                </svg>
            ),
            Check: () => (
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                    <polyline points="20 6 9 17 4 12"/>
                </svg>
            ),
            ArrowLeft: () => (
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                    <line x1="19" y1="12" x2="5" y2="12"/>
                    <polyline points="12 19 5 12 12 5"/>
                </svg>
            ),
            Upload: () => (
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                    <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/>
                    <polyline points="17 8 12 3 7 8"/>
                    <line x1="12" y1="3" x2="12" y2="15"/>
                </svg>
            ),
            Lock: () => (
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                    <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                    <path d="M7 11V7a5 5 0 0110 0v4"/>
                </svg>
            ),
            Star: () => (
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                    <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
                </svg>
            ),
            Gift: () => (
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                    <polyline points="20 12 20 22 4 22 4 12"/>
                    <rect x="2" y="7" width="20" height="5"/>
                    <line x1="12" y1="22" x2="12" y2="7"/>
                    <path d="M12 7H7.5a2.5 2.5 0 010-5C11 2 12 7 12 7z"/>
                    <path d="M12 7h4.5a2.5 2.5 0 000-5C13 2 12 7 12 7z"/>
                </svg>
            )
        };
        
        // ============ STYLES ============
        const styles = {
            // Layout
            container: {
                maxWidth: '1200px',
                margin: '0 auto',
                padding: '0 24px'
            },
            
            // Header
            header: {
                padding: '20px 0',
                borderBottom: '1px solid rgba(26, 58, 47, 0.1)'
            },
            headerInner: {
                display: 'flex',
                justifyContent: 'space-between',
                alignItems: 'center',
                maxWidth: '1200px',
                margin: '0 auto',
                padding: '0 24px'
            },
            logo: {
                fontFamily: 'var(--font-display)',
                fontSize: '1.75rem',
                fontWeight: '600',
                color: 'var(--forest)',
                textDecoration: 'none',
                display: 'flex',
                alignItems: 'center',
                gap: '10px'
            },
            logoIcon: {
                color: 'var(--cranberry)',
                animation: 'float 3s ease-in-out infinite'
            },
            nav: {
                display: 'flex',
                gap: '8px',
                alignItems: 'center'
            },
            navButton: {
                padding: '10px 16px',
                background: 'transparent',
                border: 'none',
                borderRadius: 'var(--radius-md)',
                fontFamily: 'var(--font-body)',
                fontSize: '0.95rem',
                fontWeight: '500',
                color: 'var(--forest)',
                cursor: 'pointer',
                display: 'flex',
                alignItems: 'center',
                gap: '8px',
                transition: 'all 0.2s ease'
            },
            
            // Hero
            hero: {
                padding: '80px 24px 60px',
                textAlign: 'center',
                maxWidth: '800px',
                margin: '0 auto'
            },
            heroTag: {
                display: 'inline-flex',
                alignItems: 'center',
                gap: '8px',
                padding: '8px 16px',
                background: 'var(--forest)',
                color: 'var(--cream)',
                borderRadius: 'var(--radius-xl)',
                fontSize: '0.85rem',
                fontWeight: '500',
                marginBottom: '24px'
            },
            heroTitle: {
                fontFamily: 'var(--font-display)',
                fontSize: 'clamp(2.5rem, 6vw, 4rem)',
                fontWeight: '600',
                color: 'var(--forest)',
                lineHeight: '1.1',
                marginBottom: '20px'
            },
            heroAccent: {
                color: 'var(--cranberry)'
            },
            heroSubtitle: {
                fontSize: '1.25rem',
                color: 'var(--forest-light)',
                lineHeight: '1.6',
                marginBottom: '40px',
                maxWidth: '600px',
                margin: '0 auto 40px'
            },
            
            // Buttons
            buttonPrimary: {
                padding: '18px 36px',
                background: 'var(--cranberry)',
                color: 'var(--snow)',
                border: 'none',
                borderRadius: 'var(--radius-lg)',
                fontFamily: 'var(--font-body)',
                fontSize: '1.1rem',
                fontWeight: '600',
                cursor: 'pointer',
                display: 'inline-flex',
                alignItems: 'center',
                gap: '12px',
                transition: 'all 0.3s ease',
                boxShadow: 'var(--shadow-medium)'
            },
            buttonSecondary: {
                padding: '14px 28px',
                background: 'var(--snow)',
                color: 'var(--forest)',
                border: '2px solid var(--forest)',
                borderRadius: 'var(--radius-lg)',
                fontFamily: 'var(--font-body)',
                fontSize: '1rem',
                fontWeight: '600',
                cursor: 'pointer',
                display: 'inline-flex',
                alignItems: 'center',
                gap: '10px',
                transition: 'all 0.3s ease'
            },
            buttonGold: {
                padding: '14px 28px',
                background: 'linear-gradient(135deg, var(--gold) 0%, var(--gold-light) 100%)',
                color: 'var(--forest)',
                border: 'none',
                borderRadius: 'var(--radius-lg)',
                fontFamily: 'var(--font-body)',
                fontSize: '1rem',
                fontWeight: '600',
                cursor: 'pointer',
                display: 'inline-flex',
                alignItems: 'center',
                gap: '10px',
                transition: 'all 0.3s ease',
                boxShadow: 'var(--shadow-soft)'
            },
            buttonSmall: {
                padding: '10px 20px',
                fontSize: '0.9rem'
            },
            
            // Cards
            card: {
                background: 'var(--snow)',
                borderRadius: 'var(--radius-lg)',
                padding: '28px',
                boxShadow: 'var(--shadow-soft)',
                transition: 'all 0.3s ease'
            },
            cardHover: {
                transform: 'translateY(-4px)',
                boxShadow: 'var(--shadow-medium)'
            },
            
            // Form Elements
            input: {
                width: '100%',
                padding: '14px 18px',
                border: '2px solid var(--cream-dark)',
                borderRadius: 'var(--radius-md)',
                fontFamily: 'var(--font-body)',
                fontSize: '1rem',
                color: 'var(--charcoal)',
                background: 'var(--snow)',
                transition: 'all 0.2s ease',
                outline: 'none'
            },
            inputFocus: {
                borderColor: 'var(--forest)',
                boxShadow: '0 0 0 3px rgba(26, 58, 47, 0.1)'
            },
            label: {
                display: 'block',
                marginBottom: '8px',
                fontWeight: '500',
                color: 'var(--forest)',
                fontSize: '0.95rem'
            },
            select: {
                width: '100%',
                padding: '14px 18px',
                border: '2px solid var(--cream-dark)',
                borderRadius: 'var(--radius-md)',
                fontFamily: 'var(--font-body)',
                fontSize: '1rem',
                color: 'var(--charcoal)',
                background: 'var(--snow)',
                cursor: 'pointer',
                outline: 'none'
            },
            
            // Modal
            modalOverlay: {
                position: 'fixed',
                top: 0,
                left: 0,
                right: 0,
                bottom: 0,
                background: 'rgba(26, 58, 47, 0.6)',
                backdropFilter: 'blur(8px)',
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center',
                padding: '20px',
                zIndex: 1000
            },
            modalContent: {
                background: 'var(--snow)',
                borderRadius: 'var(--radius-xl)',
                padding: '40px',
                maxWidth: '500px',
                width: '100%',
                maxHeight: '90vh',
                overflow: 'auto',
                position: 'relative',
                boxShadow: 'var(--shadow-strong)'
            },
            modalClose: {
                position: 'absolute',
                top: '20px',
                right: '20px',
                background: 'none',
                border: 'none',
                cursor: 'pointer',
                color: 'var(--forest-light)',
                padding: '8px'
            },
            
            // Ideas
            ideasGrid: {
                display: 'grid',
                gap: '24px',
                marginTop: '32px'
            },
            ideaCard: {
                background: 'var(--snow)',
                borderRadius: 'var(--radius-lg)',
                padding: '28px',
                boxShadow: 'var(--shadow-soft)',
                borderLeft: '4px solid var(--cranberry)',
                position: 'relative'
            },
            ideaNumber: {
                position: 'absolute',
                top: '-12px',
                left: '20px',
                background: 'var(--cranberry)',
                color: 'var(--snow)',
                width: '28px',
                height: '28px',
                borderRadius: '50%',
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center',
                fontSize: '0.85rem',
                fontWeight: '600'
            },
            ideaTitle: {
                fontFamily: 'var(--font-display)',
                fontSize: '1.25rem',
                fontWeight: '600',
                color: 'var(--forest)',
                marginBottom: '12px'
            },
            ideaDescription: {
                color: 'var(--forest-light)',
                lineHeight: '1.7',
                marginBottom: '16px'
            },
            ideaMaterials: {
                display: 'flex',
                flexWrap: 'wrap',
                gap: '8px'
            },
            ideaTag: {
                padding: '6px 12px',
                background: 'var(--cream)',
                borderRadius: 'var(--radius-sm)',
                fontSize: '0.85rem',
                color: 'var(--forest)'
            },
            ideaActions: {
                display: 'flex',
                gap: '12px',
                marginTop: '16px',
                paddingTop: '16px',
                borderTop: '1px solid var(--cream-dark)'
            },
            
            // Profile
            profileCard: {
                background: 'var(--snow)',
                borderRadius: 'var(--radius-lg)',
                padding: '20px',
                display: 'flex',
                alignItems: 'center',
                gap: '16px',
                boxShadow: 'var(--shadow-soft)',
                cursor: 'pointer',
                transition: 'all 0.2s ease',
                border: '2px solid transparent'
            },
            profileCardSelected: {
                borderColor: 'var(--forest)',
                background: 'var(--cream)'
            },
            profileAvatar: {
                width: '50px',
                height: '50px',
                borderRadius: '50%',
                background: 'var(--forest)',
                color: 'var(--cream)',
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center',
                fontFamily: 'var(--font-display)',
                fontSize: '1.25rem',
                fontWeight: '600'
            },
            
            // Premium Badge
            premiumBadge: {
                display: 'inline-flex',
                alignItems: 'center',
                gap: '6px',
                padding: '6px 12px',
                background: 'linear-gradient(135deg, var(--gold) 0%, var(--gold-light) 100%)',
                borderRadius: 'var(--radius-sm)',
                fontSize: '0.75rem',
                fontWeight: '600',
                color: 'var(--forest)',
                textTransform: 'uppercase',
                letterSpacing: '0.5px'
            },
            
            // Loading
            loadingDots: {
                display: 'flex',
                gap: '8px',
                justifyContent: 'center',
                padding: '40px'
            },
            loadingDot: {
                width: '12px',
                height: '12px',
                borderRadius: '50%',
                background: 'var(--cranberry)',
                animation: 'sparkle 1s ease-in-out infinite'
            },
            
            // Pricing
            pricingCard: {
                background: 'var(--snow)',
                borderRadius: 'var(--radius-xl)',
                padding: '32px',
                textAlign: 'center',
                boxShadow: 'var(--shadow-soft)',
                position: 'relative',
                overflow: 'hidden'
            },
            pricingCardFeatured: {
                border: '3px solid var(--gold)',
                transform: 'scale(1.02)'
            },
            pricingBadge: {
                position: 'absolute',
                top: '0',
                right: '0',
                background: 'var(--gold)',
                color: 'var(--forest)',
                padding: '8px 20px',
                fontSize: '0.75rem',
                fontWeight: '600',
                textTransform: 'uppercase',
                letterSpacing: '0.5px',
                borderBottomLeftRadius: 'var(--radius-md)'
            },
            pricingPrice: {
                fontFamily: 'var(--font-display)',
                fontSize: '3rem',
                fontWeight: '700',
                color: 'var(--forest)',
                lineHeight: '1'
            },
            pricingPeriod: {
                fontSize: '1rem',
                color: 'var(--forest-light)',
                marginTop: '4px'
            },
            
            // Photo Upload
            photoUpload: {
                border: '3px dashed var(--cream-dark)',
                borderRadius: 'var(--radius-lg)',
                padding: '40px',
                textAlign: 'center',
                cursor: 'pointer',
                transition: 'all 0.2s ease',
                background: 'var(--cream)'
            },
            photoUploadActive: {
                borderColor: 'var(--forest)',
                background: 'rgba(26, 58, 47, 0.05)'
            },
            photoPreview: {
                maxWidth: '100%',
                maxHeight: '300px',
                borderRadius: 'var(--radius-md)',
                objectFit: 'cover'
            },
            
            // Footer
            footer: {
                padding: '40px 24px',
                borderTop: '1px solid rgba(26, 58, 47, 0.1)',
                marginTop: '80px',
                textAlign: 'center'
            },
            footerText: {
                color: 'var(--forest-light)',
                fontSize: '0.9rem'
            }
        };
        
        // ============ COMPONENTS ============
        
        // Header Component
        const Header = ({ onOpenProfiles, onOpenPricing, isPremium, usageCount }) => (
            <header style={styles.header}>
                <div style={styles.headerInner}>
                    <a href="/" style={styles.logo}>
                        <span style={styles.logoIcon}><Icons.Gift /></span>
                        Elf Ideas
                    </a>
                    <nav style={styles.nav}>
                        <button 
                            style={styles.navButton}
                            onClick={onOpenProfiles}
                        >
                            <Icons.User /> Profiles
                        </button>
                        {!isPremium && (
                            <button 
                                style={{...styles.buttonGold, ...styles.buttonSmall}}
                                onClick={onOpenPricing}
                            >
                                <Icons.Crown /> Upgrade
                            </button>
                        )}
                        {isPremium && (
                            <span style={styles.premiumBadge}>
                                <Icons.Crown /> Premium
                            </span>
                        )}
                    </nav>
                </div>
            </header>
        );
        
        // Hero Section
        const Hero = ({ onGenerate, usageCount, isPremium, hasProfiles }) => {
            const remaining = FREE_DAILY_LIMIT - usageCount;
            const canGenerate = isPremium || remaining > 0;
            
            return (
                <section style={styles.hero}>
                    <div className="fade-in">
                        <span style={styles.heroTag}>
                            <Icons.Sparkles /> AI-Powered Ideas
                        </span>
                    </div>
                    <h1 style={styles.heroTitle} className="fade-in delay-1">
                        Never Run Out of<br/>
                        <span style={styles.heroAccent}>Elf Ideas</span> Again
                    </h1>
                    <p style={styles.heroSubtitle} className="fade-in delay-2">
                        Creative, personalized Elf on the Shelf ideas generated in seconds. 
                        Tailored to your kids' ages, interests, and your home environment.
                    </p>
                    <div style={{ display: 'flex', gap: '16px', justifyContent: 'center', flexWrap: 'wrap' }} className="fade-in delay-3">
                        <button 
                            style={{
                                ...styles.buttonPrimary,
                                opacity: canGenerate ? 1 : 0.6,
                                cursor: canGenerate ? 'pointer' : 'not-allowed'
                            }}
                            onClick={canGenerate ? onGenerate : undefined}
                        >
                            <Icons.Sparkles /> Generate Ideas
                        </button>
                    </div>
                    {!isPremium && (
                        <p style={{ marginTop: '16px', fontSize: '0.9rem', color: 'var(--forest-light)' }} className="fade-in delay-4">
                            {remaining > 0 
                                ? `${remaining} free idea${remaining !== 1 ? 's' : ''} remaining today`
                                : 'Daily limit reached. Upgrade for unlimited ideas!'
                            }
                        </p>
                    )}
                </section>
            );
        };
        
        // Profile Modal
        const ProfileModal = ({ isOpen, onClose, profiles, onSave, onDelete, selectedProfile, onSelect }) => {
            const [isAdding, setIsAdding] = useState(false);
            const [editingProfile, setEditingProfile] = useState(null);
            const [form, setForm] = useState({ name: '', age: '', gender: '', interests: '' });
            
            if (!isOpen) return null;
            
            const handleSubmit = (e) => {
                e.preventDefault();
                const profile = {
                    id: editingProfile?.id || Date.now(),
                    ...form,
                    age: parseInt(form.age) || 0
                };
                onSave(profile);
                setForm({ name: '', age: '', gender: '', interests: '' });
                setIsAdding(false);
                setEditingProfile(null);
            };
            
            const startEdit = (profile) => {
                setEditingProfile(profile);
                setForm(profile);
                setIsAdding(true);
            };
            
            return (
                <div style={styles.modalOverlay} onClick={onClose}>
                    <div style={styles.modalContent} onClick={e => e.stopPropagation()}>
                        <button style={styles.modalClose} onClick={onClose}>
                            <Icons.X />
                        </button>
                        
                        <h2 style={{ fontFamily: 'var(--font-display)', fontSize: '1.75rem', color: 'var(--forest)', marginBottom: '8px' }}>
                            Kid Profiles
                        </h2>
                        <p style={{ color: 'var(--forest-light)', marginBottom: '24px' }}>
                            Add your children to get personalized elf ideas
                        </p>
                        
                        {!isAdding ? (
                            <>
                                <div style={{ display: 'flex', flexDirection: 'column', gap: '12px', marginBottom: '20px' }}>
                                    {profiles.map(profile => (
                                        <div 
                                            key={profile.id}
                                            style={{
                                                ...styles.profileCard,
                                                ...(selectedProfile?.id === profile.id ? styles.profileCardSelected : {})
                                            }}
                                            onClick={() => onSelect(profile)}
                                        >
                                            <div style={styles.profileAvatar}>
                                                {profile.name.charAt(0).toUpperCase()}
                                            </div>
                                            <div style={{ flex: 1 }}>
                                                <div style={{ fontWeight: '600', color: 'var(--forest)' }}>
                                                    {profile.name}
                                                </div>
                                                <div style={{ fontSize: '0.9rem', color: 'var(--forest-light)' }}>
                                                    Age {profile.age} â€¢ {profile.interests || 'No interests set'}
                                                </div>
                                            </div>
                                            <button 
                                                style={{ ...styles.navButton, padding: '8px' }}
                                                onClick={(e) => { e.stopPropagation(); startEdit(profile); }}
                                            >
                                                Edit
                                            </button>
                                        </div>
                                    ))}
                                    {profiles.length === 0 && (
                                        <p style={{ textAlign: 'center', color: 'var(--forest-light)', padding: '20px' }}>
                                            No profiles yet. Add your first child!
                                        </p>
                                    )}
                                </div>
                                <button 
                                    style={{ ...styles.buttonSecondary, width: '100%', justifyContent: 'center' }}
                                    onClick={() => setIsAdding(true)}
                                >
                                    <Icons.Plus /> Add Child
                                </button>
                            </>
                        ) : (
                            <form onSubmit={handleSubmit}>
                                <div style={{ marginBottom: '20px' }}>
                                    <label style={styles.label}>Name</label>
                                    <input 
                                        style={styles.input}
                                        value={form.name}
                                        onChange={e => setForm({...form, name: e.target.value})}
                                        placeholder="Child's name"
                                        required
                                    />
                                </div>
                                <div style={{ marginBottom: '20px' }}>
                                    <label style={styles.label}>Age</label>
                                    <select 
                                        style={styles.select}
                                        value={form.age}
                                        onChange={e => setForm({...form, age: e.target.value})}
                                        required
                                    >
                                        <option value="">Select age</option>
                                        {[...Array(15)].map((_, i) => (
                                            <option key={i+1} value={i+1}>{i+1} years old</option>
                                        ))}
                                    </select>
                                </div>
                                <div style={{ marginBottom: '20px' }}>
                                    <label style={styles.label}>Gender (optional)</label>
                                    <select 
                                        style={styles.select}
                                        value={form.gender}
                                        onChange={e => setForm({...form, gender: e.target.value})}
                                    >
                                        <option value="">Prefer not to say</option>
                                        <option value="boy">Boy</option>
                                        <option value="girl">Girl</option>
                                        <option value="non-binary">Non-binary</option>
                                    </select>
                                </div>
                                <div style={{ marginBottom: '24px' }}>
                                    <label style={styles.label}>Interests & Favorite Things</label>
                                    <input 
                                        style={styles.input}
                                        value={form.interests}
                                        onChange={e => setForm({...form, interests: e.target.value})}
                                        placeholder="e.g., dinosaurs, ballet, Minecraft, Frozen"
                                    />
                                </div>
                                <div style={{ display: 'flex', gap: '12px' }}>
                                    <button 
                                        type="button"
                                        style={{ ...styles.buttonSecondary, flex: 1, justifyContent: 'center' }}
                                        onClick={() => { setIsAdding(false); setEditingProfile(null); setForm({ name: '', age: '', gender: '', interests: '' }); }}
                                    >
                                        Cancel
                                    </button>
                                    <button 
                                        type="submit"
                                        style={{ ...styles.buttonPrimary, flex: 1, justifyContent: 'center' }}
                                    >
                                        {editingProfile ? 'Update' : 'Add'} Profile
                                    </button>
                                </div>
                                {editingProfile && (
                                    <button 
                                        type="button"
                                        style={{ 
                                            ...styles.navButton, 
                                            color: 'var(--cranberry)', 
                                            width: '100%', 
                                            justifyContent: 'center',
                                            marginTop: '12px'
                                        }}
                                        onClick={() => {
                                            onDelete(editingProfile.id);
                                            setIsAdding(false);
                                            setEditingProfile(null);
                                            setForm({ name: '', age: '', gender: '', interests: '' });
                                        }}
                                    >
                                        Delete Profile
                                    </button>
                                )}
                            </form>
                        )}
                    </div>
                </div>
            );
        };
        
        // Pricing Modal
        const PricingModal = ({ isOpen, onClose, onPurchase }) => {
            if (!isOpen) return null;
            
            return (
                <div style={styles.modalOverlay} onClick={onClose}>
                    <div style={{ ...styles.modalContent, maxWidth: '700px' }} onClick={e => e.stopPropagation()}>
                        <button style={styles.modalClose} onClick={onClose}>
                            <Icons.X />
                        </button>
                        
                        <div style={{ textAlign: 'center', marginBottom: '32px' }}>
                            <h2 style={{ fontFamily: 'var(--font-display)', fontSize: '2rem', color: 'var(--forest)', marginBottom: '8px' }}>
                                Upgrade to Premium
                            </h2>
                            <p style={{ color: 'var(--forest-light)' }}>
                                Unlock unlimited ideas and exclusive features
                            </p>
                        </div>
                        
                        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))', gap: '20px' }}>
                            {/* Single Use */}
                            <div style={styles.pricingCard}>
                                <h3 style={{ fontFamily: 'var(--font-display)', fontSize: '1.25rem', color: 'var(--forest)', marginBottom: '16px' }}>
                                    Single Use
                                </h3>
                                <div style={styles.pricingPrice}>$3.99</div>
                                <p style={styles.pricingPeriod}>one-time</p>
                                <ul style={{ textAlign: 'left', margin: '24px 0', listStyle: 'none', padding: 0 }}>
                                    {['3 premium ideas', 'Photo analysis included', 'All kid profiles'].map((item, i) => (
                                        <li key={i} style={{ display: 'flex', alignItems: 'center', gap: '10px', padding: '8px 0', color: 'var(--forest-light)' }}>
                                            <span style={{ color: 'var(--gold)' }}><Icons.Check /></span>
                                            {item}
                                        </li>
                                    ))}
                                </ul>
                                <button 
                                    style={{ ...styles.buttonSecondary, width: '100%', justifyContent: 'center' }}
                                    onClick={() => onPurchase('single')}
                                >
                                    Get Single Use
                                </button>
                            </div>
                            
                            {/* Season Pass */}
                            <div style={{ ...styles.pricingCard, ...styles.pricingCardFeatured }}>
                                <div style={styles.pricingBadge}>Best Value</div>
                                <h3 style={{ fontFamily: 'var(--font-display)', fontSize: '1.25rem', color: 'var(--forest)', marginBottom: '16px' }}>
                                    Season Pass
                                </h3>
                                <div style={styles.pricingPrice}>$16.99</div>
                                <p style={styles.pricingPeriod}>entire season</p>
                                <ul style={{ textAlign: 'left', margin: '24px 0', listStyle: 'none', padding: 0 }}>
                                    {['Unlimited ideas all season', 'Photo analysis', 'Unlimited kid profiles', 'Save favorite ideas', 'Priority support'].map((item, i) => (
                                        <li key={i} style={{ display: 'flex', alignItems: 'center', gap: '10px', padding: '8px 0', color: 'var(--forest-light)' }}>
                                            <span style={{ color: 'var(--gold)' }}><Icons.Check /></span>
                                            {item}
                                        </li>
                                    ))}
                                </ul>
                                <button 
                                    style={{ ...styles.buttonGold, width: '100%', justifyContent: 'center' }}
                                    onClick={() => onPurchase('season')}
                                >
                                    <Icons.Crown /> Get Season Pass
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };
        
        // Photo Upload Component
        const PhotoUpload = ({ photo, onPhotoChange, isPremium, onUpgradeClick }) => {
            const fileInputRef = useRef(null);
            const [isDragging, setIsDragging] = useState(false);
            
            const handleFile = (file) => {
                if (file && file.type.startsWith('image/')) {
                    const reader = new FileReader();
                    reader.onload = (e) => onPhotoChange(e.target.result);
                    reader.readAsDataURL(file);
                }
            };
            
            if (!isPremium) {
                return (
                    <div 
                        style={{ ...styles.photoUpload, cursor: 'pointer' }}
                        onClick={onUpgradeClick}
                    >
                        <div style={{ color: 'var(--gold)', marginBottom: '12px' }}>
                            <Icons.Lock />
                        </div>
                        <p style={{ fontWeight: '600', color: 'var(--forest)', marginBottom: '8px' }}>
                            Photo Analysis
                        </p>
                        <p style={{ fontSize: '0.9rem', color: 'var(--forest-light)' }}>
                            Upgrade to Premium to get ideas based on your room
                        </p>
                        <span style={{ ...styles.premiumBadge, marginTop: '12px' }}>
                            <Icons.Crown /> Premium Feature
                        </span>
                    </div>
                );
            }
            
            return (
                <div 
                    style={{
                        ...styles.photoUpload,
                        ...(isDragging ? styles.photoUploadActive : {})
                    }}
                    onClick={() => fileInputRef.current?.click()}
                    onDragOver={(e) => { e.preventDefault(); setIsDragging(true); }}
                    onDragLeave={() => setIsDragging(false)}
                    onDrop={(e) => {
                        e.preventDefault();
                        setIsDragging(false);
                        handleFile(e.dataTransfer.files[0]);
                    }}
                >
                    <input 
                        ref={fileInputRef}
                        type="file"
                        accept="image/*"
                        style={{ display: 'none' }}
                        onChange={(e) => handleFile(e.target.files[0])}
                    />
                    
                    {photo ? (
                        <div>
                            <img src={photo} alt="Room preview" style={styles.photoPreview} />
                            <p style={{ marginTop: '12px', fontSize: '0.9rem', color: 'var(--forest-light)' }}>
                                Click to change photo
                            </p>
                        </div>
                    ) : (
                        <>
                            <div style={{ color: 'var(--forest)', marginBottom: '12px' }}>
                                <Icons.Camera />
                            </div>
                            <p style={{ fontWeight: '600', color: 'var(--forest)', marginBottom: '8px' }}>
                                Upload a photo of your room
                            </p>
                            <p style={{ fontSize: '0.9rem', color: 'var(--forest-light)' }}>
                                Get ideas that use items in your environment
                            </p>
                        </>
                    )}
                </div>
            );
        };
        
        // Idea Card Component
        const IdeaCard = ({ idea, index, onFavorite, isFavorite }) => (
            <div style={styles.ideaCard} className="fade-in" key={idea.id}>
                <div style={styles.ideaNumber}>{index + 1}</div>
                <h3 style={styles.ideaTitle}>{idea.title}</h3>
                <p style={styles.ideaDescription}>{idea.description}</p>
                {idea.materials && idea.materials.length > 0 && (
                    <div style={styles.ideaMaterials}>
                        <span style={{ fontSize: '0.85rem', color: 'var(--forest-light)', marginRight: '8px' }}>
                            You'll need:
                        </span>
                        {idea.materials.map((material, i) => (
                            <span key={i} style={styles.ideaTag}>{material}</span>
                        ))}
                    </div>
                )}
                <div style={styles.ideaActions}>
                    <button 
                        style={{ 
                            ...styles.navButton, 
                            color: isFavorite ? 'var(--cranberry)' : 'var(--forest-light)'
                        }}
                        onClick={() => onFavorite(idea)}
                    >
                        <Icons.Heart filled={isFavorite} />
                        {isFavorite ? 'Saved' : 'Save'}
                    </button>
                </div>
            </div>
        );
        
        // Loading Component
        const Loading = () => (
            <div style={styles.loadingDots}>
                {[0, 1, 2].map(i => (
                    <div 
                        key={i} 
                        style={{
                            ...styles.loadingDot,
                            animationDelay: `${i * 0.2}s`
                        }}
                    />
                ))}
            </div>
        );
        
        // Ideas Display
        const IdeasDisplay = ({ ideas, isLoading, onRegenerate, favorites, onFavorite }) => {
            if (isLoading) {
                return (
                    <div style={{ ...styles.container, textAlign: 'center', padding: '60px 24px' }}>
                        <Loading />
                        <p style={{ color: 'var(--forest-light)', marginTop: '16px' }}>
                            Crafting creative ideas for your elf...
                        </p>
                    </div>
                );
            }
            
            if (!ideas || ideas.length === 0) return null;
            
            return (
                <div style={{ ...styles.container, padding: '40px 24px 80px' }}>
                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '8px' }}>
                        <h2 style={{ fontFamily: 'var(--font-display)', fontSize: '1.75rem', color: 'var(--forest)' }}>
                            Your Elf Ideas
                        </h2>
                        <button style={styles.buttonSecondary} onClick={onRegenerate}>
                            <Icons.Refresh /> New Ideas
                        </button>
                    </div>
                    <div style={styles.ideasGrid}>
                        {ideas.map((idea, index) => (
                            <IdeaCard 
                                key={idea.id || index}
                                idea={idea}
                                index={index}
                                onFavorite={onFavorite}
                                isFavorite={favorites.some(f => f.id === idea.id)}
                            />
                        ))}
                    </div>
                </div>
            );
        };
        
        // Generator Panel
        const GeneratorPanel = ({ profiles, selectedProfile, onSelectProfile, photo, onPhotoChange, isPremium, onUpgradeClick }) => (
            <div style={{ ...styles.container, padding: '0 24px 40px' }}>
                <div style={{ 
                    display: 'grid', 
                    gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))', 
                    gap: '24px',
                    maxWidth: '900px',
                    margin: '0 auto'
                }}>
                    {/* Profile Selection */}
                    <div style={styles.card}>
                        <h3 style={{ fontFamily: 'var(--font-display)', fontSize: '1.25rem', color: 'var(--forest)', marginBottom: '16px', display: 'flex', alignItems: 'center', gap: '10px' }}>
                            <Icons.User /> Select Child
                        </h3>
                        {profiles.length > 0 ? (
                            <div style={{ display: 'flex', flexDirection: 'column', gap: '8px' }}>
                                {profiles.map(profile => (
                                    <div 
                                        key={profile.id}
                                        style={{
                                            ...styles.profileCard,
                                            padding: '12px 16px',
                                            ...(selectedProfile?.id === profile.id ? styles.profileCardSelected : {})
                                        }}
                                        onClick={() => onSelectProfile(profile)}
                                    >
                                        <div style={{ ...styles.profileAvatar, width: '36px', height: '36px', fontSize: '1rem' }}>
                                            {profile.name.charAt(0).toUpperCase()}
                                        </div>
                                        <div>
                                            <div style={{ fontWeight: '500', color: 'var(--forest)', fontSize: '0.95rem' }}>
                                                {profile.name}
                                            </div>
                                            <div style={{ fontSize: '0.8rem', color: 'var(--forest-light)' }}>
                                                Age {profile.age}
                                            </div>
                                        </div>
                                        {selectedProfile?.id === profile.id && (
                                            <span style={{ marginLeft: 'auto', color: 'var(--forest)' }}>
                                                <Icons.Check />
                                            </span>
                                        )}
                                    </div>
                                ))}
                            </div>
                        ) : (
                            <p style={{ color: 'var(--forest-light)', fontSize: '0.95rem' }}>
                                Add a child profile for personalized ideas
                            </p>
                        )}
                    </div>
                    
                    {/* Photo Upload */}
                    <div style={styles.card}>
                        <h3 style={{ fontFamily: 'var(--font-display)', fontSize: '1.25rem', color: 'var(--forest)', marginBottom: '16px', display: 'flex', alignItems: 'center', gap: '10px' }}>
                            <Icons.Camera /> Room Photo
                        </h3>
                        <PhotoUpload 
                            photo={photo}
                            onPhotoChange={onPhotoChange}
                            isPremium={isPremium}
                            onUpgradeClick={onUpgradeClick}
                        />
                    </div>
                </div>
            </div>
        );
        
        // Footer
        const Footer = () => (
            <footer style={styles.footer}>
                <p style={styles.footerText}>
                    Â© 2024 Elf Ideas AI. Made with â¤ï¸ for busy parents everywhere.
                </p>
            </footer>
        );
        
        // ============ MAIN APP ============
        const App = () => {
            // State
            const [profiles, setProfiles] = useState(() => storage.get(STORAGE_KEYS.PROFILES) || []);
            const [selectedProfile, setSelectedProfile] = useState(null);
            const [favorites, setFavorites] = useState(() => storage.get(STORAGE_KEYS.FAVORITES) || []);
            const [isPremium, setIsPremium] = useState(() => storage.get(STORAGE_KEYS.PREMIUM) || false);
            const [usageCount, setUsageCount] = useState(getUsageToday);
            
            const [ideas, setIdeas] = useState([]);
            const [isLoading, setIsLoading] = useState(false);
            const [photo, setPhoto] = useState(null);
            
            const [showProfileModal, setShowProfileModal] = useState(false);
            const [showPricingModal, setShowPricingModal] = useState(false);
            
            // Persist to localStorage
            useEffect(() => {
                storage.set(STORAGE_KEYS.PROFILES, profiles);
            }, [profiles]);
            
            useEffect(() => {
                storage.set(STORAGE_KEYS.FAVORITES, favorites);
            }, [favorites]);
            
            useEffect(() => {
                storage.set(STORAGE_KEYS.PREMIUM, isPremium);
            }, [isPremium]);
            
            // Handlers
            const handleSaveProfile = (profile) => {
                setProfiles(prev => {
                    const exists = prev.find(p => p.id === profile.id);
                    if (exists) {
                        return prev.map(p => p.id === profile.id ? profile : p);
                    }
                    return [...prev, profile];
                });
            };
            
            const handleDeleteProfile = (id) => {
                setProfiles(prev => prev.filter(p => p.id !== id));
                if (selectedProfile?.id === id) {
                    setSelectedProfile(null);
                }
            };
            
            const handleFavorite = (idea) => {
                setFavorites(prev => {
                    const exists = prev.find(f => f.id === idea.id);
                    if (exists) {
                        return prev.filter(f => f.id !== idea.id);
                    }
                    return [...prev, idea];
                });
            };
            
            const handlePurchase = (type) => {
                // This would integrate with Stripe
                // For now, simulate purchase
                alert(`This would open Stripe checkout for ${type === 'season' ? 'Season Pass ($16.99)' : 'Single Use ($3.99)'}`);
                // After successful payment:
                // setIsPremium(true);
                setShowPricingModal(false);
            };
            
            const generateIdeas = async () => {
                // Check usage limits
                if (!isPremium && usageCount >= FREE_DAILY_LIMIT) {
                    setShowPricingModal(true);
                    return;
                }
                
                setIsLoading(true);
                
                try {
                    // Call the Netlify function
                    const response = await fetch('/api/generate-ideas', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            profile: selectedProfile,
                            photo: isPremium ? photo : null,
                            isPremium: isPremium
                        })
                    });
                    
                    if (!response.ok) {
                        throw new Error('Failed to generate ideas');
                    }
                    
                    const data = await response.json();
                    setIdeas(data.ideas);
                    
                    if (!isPremium) {
                        incrementUsage();
                        setUsageCount(getUsageToday());
                    }
                } catch (error) {
                    console.error('Error generating ideas:', error);
                    // Fallback to mock ideas for demo/development
                    const mockIdeas = generateMockIdeas({ profile: selectedProfile, hasPhoto: !!photo && isPremium });
                    setIdeas(mockIdeas);
                    
                    if (!isPremium) {
                        incrementUsage();
                        setUsageCount(getUsageToday());
                    }
                } finally {
                    setIsLoading(false);
                }
            };
            
            // Mock idea generator (replace with actual API call)
            const generateMockIdeas = (context) => {
                const baseIdeas = [
                    {
                        id: Date.now() + 1,
                        title: "Snowball Fight Setup",
                        description: "Position your elf behind a small fort made of cotton balls, with mini marshmallows scattered around as 'snowballs'. Add a tiny sign saying 'Snowball Champion!'",
                        materials: ["Cotton balls", "Mini marshmallows", "Small paper for sign"]
                    },
                    {
                        id: Date.now() + 2,
                        title: "Cereal Bowl Swimming Pool",
                        description: "Place your elf sitting on the edge of a cereal bowl filled with mini marshmallows, with a tiny paper umbrella. Leave a note saying 'Taking a marshmallow dip!'",
                        materials: ["Cereal bowl", "Mini marshmallows", "Paper umbrella"]
                    },
                    {
                        id: Date.now() + 3,
                        title: "Toilet Paper Zipline",
                        description: "Create a zipline from a high shelf to a lower point using string, with your elf 'riding' down on a toilet paper roll. Add a small cape for extra adventure!",
                        materials: ["String", "Toilet paper roll", "Fabric scrap for cape"]
                    }
                ];
                
                // Personalize based on profile
                if (context.profile) {
                    const { name, age, interests } = context.profile;
                    
                    if (interests?.toLowerCase().includes('dinosaur')) {
                        baseIdeas[0] = {
                            id: Date.now() + 1,
                            title: "Dino Excavation Site",
                            description: `Set up your elf as an archaeologist with toy dinosaurs partially buried in a container of rice or sand. Leave a note for ${name}: "Found ancient treasure!"`,
                            materials: ["Rice or sand", "Toy dinosaurs", "Small brush", "Container"]
                        };
                    }
                    
                    if (interests?.toLowerCase().includes('frozen') || interests?.toLowerCase().includes('elsa')) {
                        baseIdeas[1] = {
                            id: Date.now() + 2,
                            title: "Frozen Ice Castle",
                            description: `Build a mini ice castle from sugar cubes around your elf, with blue tissue paper as 'ice magic'. Perfect for ${name}'s Frozen love!`,
                            materials: ["Sugar cubes", "Blue tissue paper", "Glitter (optional)"]
                        };
                    }
                }
                
                return baseIdeas;
            };
            
            return (
                <>
                    <Header 
                        onOpenProfiles={() => setShowProfileModal(true)}
                        onOpenPricing={() => setShowPricingModal(true)}
                        isPremium={isPremium}
                        usageCount={usageCount}
                    />
                    
                    <main>
                        <Hero 
                            onGenerate={generateIdeas}
                            usageCount={usageCount}
                            isPremium={isPremium}
                            hasProfiles={profiles.length > 0}
                        />
                        
                        <GeneratorPanel 
                            profiles={profiles}
                            selectedProfile={selectedProfile}
                            onSelectProfile={setSelectedProfile}
                            photo={photo}
                            onPhotoChange={setPhoto}
                            isPremium={isPremium}
                            onUpgradeClick={() => setShowPricingModal(true)}
                        />
                        
                        <IdeasDisplay 
                            ideas={ideas}
                            isLoading={isLoading}
                            onRegenerate={generateIdeas}
                            favorites={favorites}
                            onFavorite={handleFavorite}
                        />
                    </main>
                    
                    <Footer />
                    
                    <ProfileModal 
                        isOpen={showProfileModal}
                        onClose={() => setShowProfileModal(false)}
                        profiles={profiles}
                        onSave={handleSaveProfile}
                        onDelete={handleDeleteProfile}
                        selectedProfile={selectedProfile}
                        onSelect={setSelectedProfile}
                    />
                    
                    <PricingModal 
                        isOpen={showPricingModal}
                        onClose={() => setShowPricingModal(false)}
                        onPurchase={handlePurchase}
                    />
                </>
            );
        };
        
        // Render
        ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
</body>
</html>
